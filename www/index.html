<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">


        <title>Blank App</title>
    </head>
    <body>
      <nav class="nav-extended">
          <div class="nav-wrapper">
            <a href="#" class="brand-logo">Website</a>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger button-collapse"><i class="material-icons">menu</i></a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
              <li><a href="sass.html">Sass</a></li>
              <li><a href="badges.html">Components</a></li>
              <li><a href="collapsible.html">JavaScript</a></li>
            </ul>
          </div>
        <div class="nav-content">
          <ul class="tabs tabs-transparent">
            <li class="tab"><a class="active" href="#test1">Home</a></li>
            <li class="tab"><a href="#test2">Users</a></li>
            <li class="tab"><a href="#test3">Search</a></li>
          </ul>
        </div>
      </nav>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    		<script src="js/Scripts.js"></script>
			<script>
    			var xhttp = new XMLHttpRequest();
    			xhttp.onreadystatechange = function() {
    				if (this.readyState == 4 && this.status == 200) {
    					myFunction(this);
    				}
    			};
    			xhttp.open("GET", "test1.xml", true);
    			xhttp.send();

    			function myFunction(xml) {
					xmlDoc = xml.responseXML;
					x = xmlDoc.getElementsByTagName("article");
					//y = x.getElementById("id");

					//for loop prev. location

          //for (j = 0; j < x.length; j++){
          console.log("x.length= " + x.length);
          console.log("running createTags")
            createTags(xml);

            if(j = x.length){
              console.log("stopped");
              return;
            }
        //  }
        }
        //createTags
        function createTags(xml){
          var xmlDoc = xml.responseXML;

        var x, i, j, txt, xmlDoc, y, z, id;

        xmlDoc = xml.responseXML;
        txt = "";
        demtxt="";
        x = xmlDoc.getElementsByTagName("article");
        //console.log(x.attributes.length)
          for (i = 0; i < x.length; i++) {
            console.log("i = "+ i);
            //y = x[i];
						var open = document.createElement("div");
							open.className = "row";
              open.id = i;
						var color = document.createElement("div");
							color.className = "card blue-grey darken-1";
						var col = document.createElement("div");
							col.className = "col s12 m6";
						var content = document.createElement("div");
							content.className = "card-content white-text";
						var title = document.createElement("span");
							title.className = "card-title";
						var twords = document.createElement("p");
							twords.id = "Title" + i;
						var author = document.createElement("p");
							author.id = "Author" + i;
						var abstract = document.createElement("p");
							abstract.id = "Abstract" + i;
						var action = document.createElement("div");
							action.className = "card-action";
						var linka = document.createElement("a");
							linka.href = "#";
							linka.className = "waves-effect";
						var linkat = document.createTextNode("Read Later");
						var linkb = document.createElement("a");
							linkb.href = "#";
							linkb.className = "waves-effect";
						var linkbt = document.createTextNode("Read More");
						var demo = document.createElement("p");
							demo.id = "demo" + i;
            var demoTxt = document.createTextNode(demtxt);
						document.body.appendChild(open);
						open.appendChild(col);
						col.appendChild(color);
						color.appendChild(content);
						content.appendChild(title);
						content.appendChild(author);
						content.appendChild(abstract);
						content.appendChild(action);
						action.appendChild(linka);
						linka.appendChild(linkat);
						action.appendChild(linkb);
						linkb.appendChild(linkbt);
						title.appendChild(twords);
						content.appendChild(demo);
            demo.appendChild(demoTxt);
					//}
					//i = xmlDoc.getElementsByTagName("article").nextSibling;
            console.log("open id = "+ open.id);
    				document.getElementById("Title" + i).innerHTML =
    				xmlDoc.getElementsByTagName("title")[i].childNodes[0].nodeValue;
    				document.getElementById("Author" + i).innerHTML =
    				xmlDoc.getElementsByTagName("author")[i].childNodes[0].nodeValue;
    				document.getElementById("Abstract" + i).innerHTML =
    				xmlDoc.getElementsByTagName("abstract")[i].childNodes[0].nodeValue;



					}
        }
    		</script>
    </body>
</html>
